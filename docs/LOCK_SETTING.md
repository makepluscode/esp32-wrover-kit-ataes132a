# ATAES132A 학습 및 테스트용 권장 잠금(Lock) 설정 가이드

본 문서는 ATAES132A 칩을 **'학습 및 예제 테스트용'**으로 사용할 때 권장하는 초기 설정과 절차를 설명합니다.

ATAES132A는 보안 칩의 특성상 한 번 잠그면(Lock) 되돌릴 수 없는 영역이 많으므로, 학습 단계에서는 유연성을 확보하면서도 필수 기능(난수 생성 등)을 활성화할 수 있는 **"최적의 세팅"**이 필요합니다.

---

## 1. 권장 세팅 전략: "기본값 유지 + Configuration Lock"

ATAES132A 칩의 **공장 초기값(Factory Default)** 상태를 최대한 유지하면서, **Configuration Memory만 잠그는(Lock)** 방식을 권장합니다.

### 이 전략의 장점
*   **벽돌 방지:** Key Memory를 잠그지 않으므로, 키 값을 잃어버리거나 실수로 덮어써도 언제든지 다시 쓸 수 있습니다.
*   **모든 기능 실습 가능:** `Random`(난수), `Counter`, `Encrypt`, `Decrypt` 등 대부분의 핵심 예제를 정상적으로 실행할 수 있습니다.
*   **접근성:** 사용자 메모리(User Memory)에 자유롭게 읽고 쓸 수 있어 데이터 저장 테스트가 용이합니다.

### 주요 설정값 분석 (Factory Default 기준)

| 항목 | 설정값 | 의미 및 학습용 적합성 |
| :--- | :--- | :--- |
| **I2C Address** | `0xA0` | 예제 코드의 기본 설정(`aes132_config.h`)과 일치하여 수정 없이 바로 사용 가능합니다. |
| **KeyConfig** | `ChangeKeys` = 1 | Key Memory가 잠긴 후에도 키 값을 변경할 수 있는 설정입니다. (학습 중 키 변경 용이) |
| **ZoneConfig** | `Auth/Enc` = 0 | 사용자 메모리 영역에 인증이나 암호화 없이 자유롭게 읽기/쓰기가 가능합니다. |
| **ChipConfig** | `EncDecrE` = 1 | 암호화/복호화 명령어가 활성화되어 있습니다. |

---

## 2. 단계별 적용 방법

새 칩(Unlocked 상태)을 받았다면, 다음 순서대로 진행하여 학습 환경을 구축하십시오.

### 1단계: 설정(Configuration) 확인 (선택 사항)
새 칩이라면 대부분 기본값(`0xA0`)으로 설정되어 있습니다. `01_info` 예제 등을 통해 통신이 되는지 확인하는 것으로 충분합니다.

### 2단계: Configuration Memory 잠금 (필수)
제공된 **Lock 예제 코드**를 실행하여 Configuration Memory를 잠급니다.

*   **왜 잠가야 하나요?**
    *   ATAES132A는 Configuration Memory가 잠겨야(`LockConfig != 0x55`) **RNG(난수 생성기)가 정상 동작**합니다.
    *   잠그지 않으면 `Random` 명령어는 항상 고정된 값(예: `0xA5` 16바이트)만 반환하는 **Test Mode**로 동작합니다.
    *   난수가 고정되면 `Nonce`, `KeyCreate`, `Encrypt`(랜덤 Nonce 사용 시) 등의 기능이 정상적으로 작동하지 않거나 보안성이 사라집니다.
    *   `Counter` 기능 또한 설정이 확정(Lock)되어야 안정적으로 사용할 수 있습니다.

### 3단계: Key Memory는 "잠그지 않음" (권장)
학습 단계에서는 Key Memory를 **Unlocked** 상태로 유지하십시오.

*   **이유:**
    *   Key Memory를 잠그지 않아도 `Encrypt`, `Decrypt` 등 대부분의 암호화 기능은 정상 작동합니다. (KeyConfig의 사용 권한 비트가 기본적으로 켜져 있기 때문)
    *   나중에 고급 인증(Authentication) 예제나 키 생성(KeyCreate) 예제를 깊이 있게 다룰 때 필요하다면 그때 잠가도 늦지 않습니다.
    *   초기에 실수로 키를 잘못 넣고 잠가버리는 불상사를 막을 수 있습니다.

---

## 3. 요약: 공부용 최적 시나리오

| 항목 | 권장 상태 | 이유 |
| :--- | :--- | :--- |
| **I2C Address** | **0xA0** | 기본 예제 코드 호환성 유지 |
| **Config Memory** | **Locked (잠금)** | **RNG(난수), Counter 기능 활성화 필수 조건** |
| **Key Memory** | **Unlocked (열림)** | 키 값을 자유롭게 수정하며 다양한 테스트 가능 |
| **ZoneConfig** | **R/W (읽기/쓰기)** | 메모리 읽기/쓰기 예제 실습 용이 |

## 4. 결론 및 실행

복잡한 설정을 건드리지 마십시오. 다음 단계를 수행하면 즉시 예제 학습이 가능합니다.

1.  **Configuration Memory Lock 수행**: 제공된 Lock 툴/코드를 사용하여 Config 영역만 잠급니다.
2.  **전원 재부팅**: Lock 적용을 위해 칩의 전원을 껐다 켭니다.
3.  **예제 실행**: 4번(Random), 5번(Counter), 6번(Encrypt) 예제를 순서대로 진행합니다.
